# 자바 - 경마 게임
## 구현 배경 
  - https://github.com/next-step/java-racingcar-playground
    - 위 링크의 게임을 구현하던 도중, 이 게임에 베팅하는 과정을 추가하면 재미있겠다는 생각에 시도해봤습니다.
    - 그래서 이 게임을 개인적으로 구현한 https://github.com/sangdoll/java-racingcar-playground 을 참고하여 구현하였습니다.

- 자바를 시작한지 3개월이 안된 초보가 처음으로 구상하고, 구현해본 프로그램입니다.


## 게임 소개

[ ] 총 10마리의 경주마가 있으며, 말 이름은 9월 24일 서울경마에서 이름이 5글자인 말 이름을 가져왔습니다.

    티즈에너지, 원더풀키티, 파이팅대디, 라온퍼스트, 퀵실버키튼,
    참좋은친구, 스마트전사, 파워에치드, 한강에이스, 강철드래곤

[ ] 베팅 참가자의 이름과, 현재 잔고를 원 단위로 입력받습니다.(잔고는 1000원부터 가능합니다.)

[ ] 어떤 게임을 진행할지 결정합니다.
    
    - 단승식(Win)                : 1등인 말을 고르기
    - 연승식(Place)              : 3등 안에 들어올 말을 한마리 고르기
    - 복승식(Quinella)           : 1등과 2등 말을 순서에 상관없이 맞추기
    - 쌍승식(Exacta)             : 1,2위를 순서대로 맞추기
    - 복연승식(Quinella Place)   : 3등 안으로 들어올 2마리의 말을 순서에 상관없이 맞추기
    - 삼복승식(Trio)             : 3등 안으로 들어올 3마리의 말을 순서에 상관없이 맞추기
    - 삼쌍승식(Trifecta)         : 1,2,3위를 순서대로 맞추기

[ ] 어떤 말을 선택할지 결정합니다. 

[ ] 베팅 금액을 결정합니다.

[ ] 경주를 시작하고, 경주 상황을 출력한 뒤, 결과에 저장합니다.

[ ] 결과와 비교한 뒤, 잔고를 변화시킵니다. 배당률은 9월 24일 서울경마-11경주의 결과를 따릅니다.

    - 단승식(Win)             : 6.6
    - 연승식(Place)           : 1.7(1등마), 1.3(2등마), 2.0(3등마)
    - 복승식(Quinella)        : 4.1
    - 쌍승식(Exacta)          : 12.7
    - 복연승식(Quinella Place) : 2.3(1등,2등마), 5.2(1등,3등마), 2.8(2등,3등마)
    - 삼복승식(Trio)           : 6.9
    - 삼쌍승식(Trifecta)       : 56.1

[ ] 현재 잔고를 출력한 뒤, 게임을 다시 시작할지 여부를 묻습니다. 잔고가 0원이거나 N을 입력시 게임을 종료합니다.


## 기능 개요

[ ] 베팅 참가자의 이름과, 현재 잔고를 입력받습니다.
    
    입력받은 정보를 기반으로, HorseRacing 클래스의 User 필드를 설정합니다.

[ ] 게임 방식을 선택합니다.

    - 게임 방식을 입력받은 뒤, 이를 이용하여 BettingStrategy 객체를 얻어냅니다.
    - 이 방식을 기반으로, 다음의 말 선택창에서 안내 메시지를 다르게 출력합니다.

[ ] 어떤 말을 선택할지 결정합니다.

    - 단승식,연승식인 경우 한 마리의 말만 입력받습니다.
    - 복승식, 쌍승식, 복연승식의 경우 두 마리의 말을 컴마로 구분하여 입력받습니다.
    - 삼복승식, 삼쌍승식의 경우 세 마리의 말을 컴마로 구분하여 입력받습니다.

[ ] 베팅 금액을 결정합니다.

    - 이전에 입력받은 유저가 선택한 말 정보와, 베팅 금액을 이용하여 UserBetInfo 객체를 얻어냅니다.

[ ] 상수로 정의한 경주마 목록을 이용하여, 생성자에서 초기화시킨 RaceHorses 필드를 이용하여, 경주를 시작합니다.

    - 경주 방식은, 각 말에 대해 랜덤한 숫자를 뽑아서 그 숫자가 5 이상이면 전진하는 방식입니다.
    - 이를 20번 반복하여 말들을 전진시키며, 그 과정을 출력하고, 결과는 RaceResult에 저장합니다.
    - 테스트에 용이하도록, 랜덤 번호를 리턴하는 getNumberForRace 메서드를 정의하였습니다.
        - 테스트 코드를 작성할 때, 익명 클래스를 이용하여 이를 재정의하여 원하는 결과를 얻어낼 수 있습니다.

[ ] 경주 순위는 다음과 같은 과정으로 정합니다.

    - 우선, Horse 클래스의 Location 필드값이 가장 큰 순으로 정렬합니다.
    - 필드값이 동일하다면, 입력된 말 순서대로 정렬합니다.
        - 반드시 서로 다른 값이 나오도록 설정하는 방법이 있을 지 고민중입니다.

[ ] 레이싱의 결과와 유저 정보, 유저의 베팅 정보를 이용하여, 베팅 전략에 따라 결과를 구한 뒤, 새로운 User 객체로 반환합니다.

    - BettingStrategy에 저장된 디폴트 메서드인 updateUserByBetStrategy 메서드를 이용합니다.
    - updateUserByBetStrategy 안의 getReward 메서드는 각 구현 클래스에서 재정의하며,
        각 구현 클래스에서 정의된 배당률 정보를 이용하여, 이기면 배당률에 따른 상금을, 지면 0을 리턴합니다.

[ ] 유저의 정보를 받아, 잔고가 1000원 미만이면 게임을 종료하고, 아닌 경우 재시작 여부를 Y, N으로 입력받아 결정합니다.

    - HorseRacing 클래스의 gameOn, gameOff 메서드를 이용하여, while 루프의 조건식을 변화시킵니다.

## 출력 예시

    ---------------------------
    |                         |
    | 경마 게임에 오신것을 환영합니다 |
    |                         |
    ---------------------------
    이름을 입력하세요 : 상돌이
    현재 잔고를 입력하세요 : 100000000
    단승식, 연승식, 복승식, 쌍승식, 복연승식, 삼복승식, 삼쌍승식이 있습니다.
    게임 방식을 입력해주세요 : 복승식
    오늘의 경주마 목록입니다.
    티즈에너지 | 원더풀키티 | 파이팅대디 | 라온퍼스트 | 퀵실버키든 | 참좋은친구 | 스마트전사 | 파워에치드 | 한강에이스 | 강철드래곤
    두 마리의 말을 선택해주세요. 입력 예시 : 원더풀키티,파이팅대디
    파이팅대디,라온퍼스트
    베팅할 금액을 입력하세요 : 10000000
    티즈에너지 :  
    원더풀키티 :  
    파이팅대디 :  -
    라온퍼스트 :  
    퀵실버키든 :  
    참좋은친구 :  
    스마트전사 :  
    파워에치드 :  -
    한강에이스 :  -
    강철드래곤 :
    
    티즈에너지 :  
    원더풀키티 :  
    파이팅대디 :  --
    라온퍼스트 :  
    퀵실버키든 :  
    참좋은친구 :  
    스마트전사 :  -
    파워에치드 :  --
    한강에이스 :  --
    강철드래곤 :
    
    티즈에너지 :  -
    원더풀키티 :  
    파이팅대디 :  ---
    라온퍼스트 :  -
    퀵실버키든 :  -
    참좋은친구 :  -
    스마트전사 :  --
    파워에치드 :  ---
    한강에이스 :  ---
    강철드래곤 :
    
    티즈에너지 :  -
    원더풀키티 :  -
    파이팅대디 :  ---
    라온퍼스트 :  --
    퀵실버키든 :  --
    참좋은친구 :  --
    스마트전사 :  --
    파워에치드 :  ---
    한강에이스 :  ----
    강철드래곤 :
    
    티즈에너지 :  --
    원더풀키티 :  -
    파이팅대디 :  ---
    라온퍼스트 :  --
    퀵실버키든 :  --
    참좋은친구 :  ---
    스마트전사 :  ---
    파워에치드 :  ----
    한강에이스 :  -----
    강철드래곤 :  -
    
    티즈에너지 :  ---
    원더풀키티 :  --
    파이팅대디 :  ---
    라온퍼스트 :  ---
    퀵실버키든 :  --
    참좋은친구 :  ----
    스마트전사 :  ----
    파워에치드 :  -----
    한강에이스 :  ------
    강철드래곤 :  --
    
    티즈에너지 :  ----
    원더풀키티 :  ---
    파이팅대디 :  ---
    라온퍼스트 :  ----
    퀵실버키든 :  --
    참좋은친구 :  ----
    스마트전사 :  ----
    파워에치드 :  ------
    한강에이스 :  -------
    강철드래곤 :  --
    
    티즈에너지 :  -----
    원더풀키티 :  ---
    파이팅대디 :  ----
    라온퍼스트 :  ----
    퀵실버키든 :  ---
    참좋은친구 :  -----
    스마트전사 :  ----
    파워에치드 :  ------
    한강에이스 :  --------
    강철드래곤 :  ---
    
    티즈에너지 :  ------
    원더풀키티 :  ---
    파이팅대디 :  ----
    라온퍼스트 :  -----
    퀵실버키든 :  ---
    참좋은친구 :  ------
    스마트전사 :  -----
    파워에치드 :  ------
    한강에이스 :  --------
    강철드래곤 :  ---
    
    티즈에너지 :  ------
    원더풀키티 :  ----
    파이팅대디 :  -----
    라온퍼스트 :  -----
    퀵실버키든 :  ---
    참좋은친구 :  ------
    스마트전사 :  ------
    파워에치드 :  -------
    한강에이스 :  --------
    강철드래곤 :  ---
    
    티즈에너지 :  ------
    원더풀키티 :  -----
    파이팅대디 :  ------
    라온퍼스트 :  -----
    퀵실버키든 :  ---
    참좋은친구 :  -------
    스마트전사 :  -------
    파워에치드 :  --------
    한강에이스 :  --------
    강철드래곤 :  ---
    
    티즈에너지 :  -------
    원더풀키티 :  ------
    파이팅대디 :  ------
    라온퍼스트 :  ------
    퀵실버키든 :  ---
    참좋은친구 :  --------
    스마트전사 :  --------
    파워에치드 :  --------
    한강에이스 :  ---------
    강철드래곤 :  ----
    
    티즈에너지 :  --------
    원더풀키티 :  ------
    파이팅대디 :  ------
    라온퍼스트 :  -------
    퀵실버키든 :  ----
    참좋은친구 :  --------
    스마트전사 :  --------
    파워에치드 :  ---------
    한강에이스 :  ----------
    강철드래곤 :  ----
    
    티즈에너지 :  --------
    원더풀키티 :  -------
    파이팅대디 :  -------
    라온퍼스트 :  -------
    퀵실버키든 :  ----
    참좋은친구 :  --------
    스마트전사 :  --------
    파워에치드 :  ---------
    한강에이스 :  ----------
    강철드래곤 :  ----
    
    티즈에너지 :  ---------
    원더풀키티 :  --------
    파이팅대디 :  --------
    라온퍼스트 :  --------
    퀵실버키든 :  ----
    참좋은친구 :  --------
    스마트전사 :  ---------
    파워에치드 :  ----------
    한강에이스 :  ----------
    강철드래곤 :  ----
    
    티즈에너지 :  ----------
    원더풀키티 :  ---------
    파이팅대디 :  ---------
    라온퍼스트 :  --------
    퀵실버키든 :  -----
    참좋은친구 :  --------
    스마트전사 :  ---------
    파워에치드 :  -----------
    한강에이스 :  -----------
    강철드래곤 :  -----
    
    티즈에너지 :  -----------
    원더풀키티 :  ---------
    파이팅대디 :  ----------
    라온퍼스트 :  --------
    퀵실버키든 :  ------
    참좋은친구 :  --------
    스마트전사 :  ---------
    파워에치드 :  ------------
    한강에이스 :  ------------
    강철드래곤 :  ------
    
    티즈에너지 :  -----------
    원더풀키티 :  ----------
    파이팅대디 :  ----------
    라온퍼스트 :  --------
    퀵실버키든 :  ------
    참좋은친구 :  ---------
    스마트전사 :  ---------
    파워에치드 :  -------------
    한강에이스 :  -------------
    강철드래곤 :  ------
    
    티즈에너지 :  ------------
    원더풀키티 :  ----------
    파이팅대디 :  ----------
    라온퍼스트 :  --------
    퀵실버키든 :  -------
    참좋은친구 :  ----------
    스마트전사 :  ---------
    파워에치드 :  --------------
    한강에이스 :  -------------
    강철드래곤 :  -------
    
    티즈에너지 :  ------------
    원더풀키티 :  -----------
    파이팅대디 :  ----------
    라온퍼스트 :  --------
    퀵실버키든 :  --------
    참좋은친구 :  ----------
    스마트전사 :  ---------
    파워에치드 :  --------------
    한강에이스 :  -------------
    강철드래곤 :  -------
    
    아쉽게도 맞추지 못하였습니다. 다음에 다시 도전해주세요 !
    상돌이님의 현재 잔고는 90000000원 입니다.
    다시 시도하려면 Y, 종료하려면 N를 입력해주세요
    Y
    단승식, 연승식, 복승식, 쌍승식, 복연승식, 삼복승식, 삼쌍승식이 있습니다.
    게임 방식을 입력해주세요 : 연승식
    오늘의 경주마 목록입니다.
    티즈에너지 | 원더풀키티 | 파이팅대디 | 라온퍼스트 | 퀵실버키든 | 참좋은친구 | 스마트전사 | 파워에치드 | 한강에이스 | 강철드래곤
    한 마리의 말을 선택해주세요. 입력 예시 : 원더풀키티
    퀵실버키든
    베팅할 금액을 입력하세요 : 90000000
    티즈에너지 :  -
    원더풀키티 :  -
    파이팅대디 :  -
    라온퍼스트 :  
    퀵실버키든 :  
    참좋은친구 :  -
    스마트전사 :  
    파워에치드 :  
    한강에이스 :  
    강철드래곤 :  -
    
    티즈에너지 :  -
    원더풀키티 :  -
    파이팅대디 :  -
    라온퍼스트 :  -
    퀵실버키든 :  -
    참좋은친구 :  --
    스마트전사 :  
    파워에치드 :  -
    한강에이스 :  -
    강철드래곤 :  --
    
    티즈에너지 :  --
    원더풀키티 :  --
    파이팅대디 :  -
    라온퍼스트 :  --
    퀵실버키든 :  --
    참좋은친구 :  ---
    스마트전사 :  -
    파워에치드 :  -
    한강에이스 :  -
    강철드래곤 :  --
    
    티즈에너지 :  --
    원더풀키티 :  --
    파이팅대디 :  --
    라온퍼스트 :  ---
    퀵실버키든 :  ---
    참좋은친구 :  ----
    스마트전사 :  -
    파워에치드 :  --
    한강에이스 :  -
    강철드래곤 :  --
    
    티즈에너지 :  --
    원더풀키티 :  ---
    파이팅대디 :  --
    라온퍼스트 :  ----
    퀵실버키든 :  ----
    참좋은친구 :  ----
    스마트전사 :  --
    파워에치드 :  ---
    한강에이스 :  -
    강철드래곤 :  ---
    
    티즈에너지 :  ---
    원더풀키티 :  ---
    파이팅대디 :  --
    라온퍼스트 :  ----
    퀵실버키든 :  -----
    참좋은친구 :  -----
    스마트전사 :  --
    파워에치드 :  ----
    한강에이스 :  --
    강철드래곤 :  ---
    
    티즈에너지 :  ----
    원더풀키티 :  ----
    파이팅대디 :  --
    라온퍼스트 :  ----
    퀵실버키든 :  -----
    참좋은친구 :  -----
    스마트전사 :  ---
    파워에치드 :  ----
    한강에이스 :  ---
    강철드래곤 :  ----
    
    티즈에너지 :  -----
    원더풀키티 :  -----
    파이팅대디 :  ---
    라온퍼스트 :  -----
    퀵실버키든 :  -----
    참좋은친구 :  -----
    스마트전사 :  ---
    파워에치드 :  ----
    한강에이스 :  ----
    강철드래곤 :  ----
    
    티즈에너지 :  ------
    원더풀키티 :  ------
    파이팅대디 :  ----
    라온퍼스트 :  ------
    퀵실버키든 :  -----
    참좋은친구 :  -----
    스마트전사 :  ---
    파워에치드 :  -----
    한강에이스 :  ----
    강철드래곤 :  -----
    
    티즈에너지 :  ------
    원더풀키티 :  ------
    파이팅대디 :  ----
    라온퍼스트 :  ------
    퀵실버키든 :  ------
    참좋은친구 :  -----
    스마트전사 :  ----
    파워에치드 :  ------
    한강에이스 :  ----
    강철드래곤 :  ------
    
    티즈에너지 :  -------
    원더풀키티 :  ------
    파이팅대디 :  ----
    라온퍼스트 :  ------
    퀵실버키든 :  ------
    참좋은친구 :  ------
    스마트전사 :  -----
    파워에치드 :  -------
    한강에이스 :  -----
    강철드래곤 :  ------
    
    티즈에너지 :  -------
    원더풀키티 :  ------
    파이팅대디 :  -----
    라온퍼스트 :  -------
    퀵실버키든 :  ------
    참좋은친구 :  ------
    스마트전사 :  ------
    파워에치드 :  -------
    한강에이스 :  -----
    강철드래곤 :  -------
    
    티즈에너지 :  --------
    원더풀키티 :  ------
    파이팅대디 :  ------
    라온퍼스트 :  -------
    퀵실버키든 :  ------
    참좋은친구 :  -------
    스마트전사 :  -------
    파워에치드 :  --------
    한강에이스 :  ------
    강철드래곤 :  --------
    
    티즈에너지 :  --------
    원더풀키티 :  ------
    파이팅대디 :  ------
    라온퍼스트 :  --------
    퀵실버키든 :  -------
    참좋은친구 :  -------
    스마트전사 :  -------
    파워에치드 :  ---------
    한강에이스 :  ------
    강철드래곤 :  --------
    
    티즈에너지 :  ---------
    원더풀키티 :  -------
    파이팅대디 :  -------
    라온퍼스트 :  --------
    퀵실버키든 :  --------
    참좋은친구 :  --------
    스마트전사 :  -------
    파워에치드 :  ----------
    한강에이스 :  -------
    강철드래곤 :  --------
    
    티즈에너지 :  ----------
    원더풀키티 :  --------
    파이팅대디 :  -------
    라온퍼스트 :  ---------
    퀵실버키든 :  --------
    참좋은친구 :  --------
    스마트전사 :  -------
    파워에치드 :  ----------
    한강에이스 :  -------
    강철드래곤 :  --------
    
    티즈에너지 :  ----------
    원더풀키티 :  --------
    파이팅대디 :  --------
    라온퍼스트 :  ---------
    퀵실버키든 :  --------
    참좋은친구 :  ---------
    스마트전사 :  --------
    파워에치드 :  ----------
    한강에이스 :  -------
    강철드래곤 :  --------
    
    티즈에너지 :  ----------
    원더풀키티 :  ---------
    파이팅대디 :  ---------
    라온퍼스트 :  ----------
    퀵실버키든 :  --------
    참좋은친구 :  ---------
    스마트전사 :  ---------
    파워에치드 :  ----------
    한강에이스 :  -------
    강철드래곤 :  --------
    
    티즈에너지 :  ----------
    원더풀키티 :  ----------
    파이팅대디 :  ---------
    라온퍼스트 :  -----------
    퀵실버키든 :  ---------
    참좋은친구 :  ---------
    스마트전사 :  ---------
    파워에치드 :  -----------
    한강에이스 :  --------
    강철드래곤 :  ---------
    
    티즈에너지 :  ----------
    원더풀키티 :  -----------
    파이팅대디 :  ----------
    라온퍼스트 :  -----------
    퀵실버키든 :  ----------
    참좋은친구 :  ---------
    스마트전사 :  ---------
    파워에치드 :  -----------
    한강에이스 :  ---------
    강철드래곤 :  ---------
    
    아쉽게도 맞추지 못하였습니다. 다음에 다시 도전해주세요 !
    상돌이님의 현재 잔고는 0원 입니다.
    잔고가 부족하여 재시작할 수 없습니다. 게임을 종료합니다.
    감사합니다. 안녕히 가세요.